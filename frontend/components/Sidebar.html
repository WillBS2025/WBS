//<script type="text/jsx">

function Sidebar({ collapsed, onCollapse, handleLogout }) {
  // ================================
  // ABRE EL SUBMENÚ SI LA URL ES /inventario
  // ================================
  const defaultOpen = React.useMemo(() => {
    try {
      return (window.location.pathname || "").startsWith("/inventario")
        ? ["inventario"]
        : [];
    } catch (_) {
      return [];
    }
  }, []);

  return (
    <Layout.Sider
      collapsible
      collapsed={collapsed}
      onCollapse={onCollapse}
      breakpoint="lg"              // SE COLAPSA EN PANTALLAS GRANDES
      collapsedWidth="0"           // OCULTA COMPLETAMENTE EN COLAPSADO
      style={{ background: "#001529" }} // COLOR DE FONDO SIDEBAR
    >
      {/* LOGO / TITULO */}
      <div
        className="logo-container"
        style={{ padding: "16px", display: "flex", alignItems: "center" }}
      >
        <h1 style={{ color: "white", margin: 0, fontSize: "24px" }}>
          Wilito BarberShop
        </h1>
      </div>

      <Menu
        theme="dark"
        mode="inline"
        defaultSelectedKeys={["1"]}
        defaultOpenKeys={defaultOpen} // **ABRE INVENTARIO SI LA RUTA COINCIDE**
      >
        <Menu.Item key="1" icon={<icons.HomeOutlined />}>
          <Link to="/" onClick={() => onCollapse(true)}>Inicio</Link>
        </Menu.Item>

        <Menu.Item key="2" icon={<icons.FormOutlined />}>
          <Link to="/formularioRegistro" onClick={() => onCollapse(true)}>Registro</Link>
        </Menu.Item>

        <Menu.Item key="3" icon={<icons.TeamOutlined />}>
          <Link to="/empleados" onClick={() => onCollapse(true)}>Empleados</Link>
        </Menu.Item>

        {/* ================================
           INVENTARIO CON SUBMENÚ (2 SUBRAMA)
           ================================ */}
        <Menu.SubMenu
          key="inventario"
          icon={<icons.BarcodeOutlined />} // ICONO DEL PADRE
          title="Inventario"
        >
          {/* SUBOPCIÓN: PRODUCTOS */}
          <Menu.Item key="inventario-productos" icon={<icons.AppstoreOutlined />}>
            <Link to="/inventario/Productos" onClick={() => onCollapse(true)}>
              Productos
            </Link>
          </Menu.Item>

          {/* SUBOPCIÓN: SUMINISTROS */}
          <Menu.Item key="inventario-suministros" icon={<icons.ToolOutlined />}>
            <Link to="/inventario/suministros" onClick={() => onCollapse(true)}>
              Suministros
            </Link>
          </Menu.Item>
        </Menu.SubMenu>

        <Menu.Item key="5" icon={<icons.ShoppingCartOutlined />}>
          <Link to="/ventas" onClick={() => onCollapse(true)}>Ventas</Link>
        </Menu.Item>

        <Menu.Item key="6" icon={<icons.LineChartOutlined />}>
          <Link to="/reportes" onClick={() => onCollapse(true)}>Reportes</Link>
        </Menu.Item>

        <Menu.Item key="7" icon={<icons.LogoutOutlined />} onClick={handleLogout}>
          Cerrar Sesión
        </Menu.Item>
      </Menu>
    </Layout.Sider>
  );
}

//</script>
