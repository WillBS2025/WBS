//<script type="text/jsx">
function Productos() {
  const { useState, useEffect } = React;
  const { Table, Card, Button, Modal, Form, Input, InputNumber, Select, Space, message, Row, Col, Divider } = antd;

  // ===== Estado general =====
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);

  // Sucursales (para Select)
  const [sucursales, setSucursales] = useState([]);

  // Modal + formulario
  const [form] = Form.useForm();
  const [modalOpen, setModalOpen] = useState(false);
  const [modalMode, setModalMode] = useState('create'); // 'create' | 'edit'

  // Eliminar
  const [deleteOpen, setDeleteOpen] = useState(false);
  const [toDelete, setToDelete] = useState(null);

  // ===== Filtros =====
  const [q, setQ] = useState(''); // buscador global
  const [fSucursal, setFSucursal] = useState(undefined);
  const [fDesde, setFDesde] = useState(''); // yyyy-mm-dd
  const [fHasta, setFHasta] = useState(''); // yyyy-mm-dd
  const [fPrecioMin, setFPrecioMin] = useState(null);
  const [fPrecioMax, setFPrecioMax] = useState(null);
  const [fStockMin, setFStockMin] = useState(null);
  const [fStockMax, setFStockMax] = useState(null);

  // ===== PAGINACIÓN (Load more) =====
  const [batchSize, setBatchSize] = useState(10);     // tamaño de lote
  const [visibleCount, setVisibleCount] = useState(10); // cuánto se muestra

  // Cuando cambian los filtros o llega nueva data, reiniciamos el conteo visible al tamaño de lote
  useEffect(function(){
    setVisibleCount(batchSize);
  }, [q, fSucursal, fDesde, fHasta, fPrecioMin, fPrecioMax, fStockMin, fStockMax, data, batchSize]);

  // ===== Helpers Precio (L.) =====
  function formatHNL(value) {
    var n = Number(value);
    if (!isFinite(n)) n = 0;
    try {
      var num = new Intl.NumberFormat('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true
      }).format(n);
      return 'L.' + num;
    } catch (e) {
      var raw = n.toFixed(2);
      var withCommas = raw.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      return 'L.' + withCommas;
    }
  }

  // ===== Helpers Fecha =====
  function parseFechaFlexible(v) {
    if (v instanceof Date) return v;
    if (typeof v === 'number') return new Date(v);
    if (typeof v === 'string') {
      if (/^\d{4}-\d{2}-\d{2}$/.test(v)) return new Date(v + 'T00:00:00');
      var m = v.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);
      if (m) {
        var d = parseInt(m[1], 10), mo = parseInt(m[2], 10) - 1, y = parseInt(m[3], 10);
        if (y < 100) y += 2000;
        return new Date(y, mo, d);
      }
      var d2 = new Date(v);
      if (!isNaN(d2)) return d2;
      return null;
    }
    var d0 = new Date(v);
    return isNaN(d0) ? null : d0;
  }
  function formatYMD(d) {
    var y = d.getFullYear();
    var m = String(d.getMonth() + 1).padStart(2, '0');
    var day = String(d.getDate()).padStart(2, '0');
    return y + '/' + m + '/' + day;
  }
  function formatInputDate(d) {
    if (!d) return '';
    var y = d.getFullYear();
    var m = String(d.getMonth() + 1).padStart(2, '0');
    var day = String(d.getDate()).padStart(2, '0');
    return y + '-' + m + '-' + day;
  }
  function parseInputDate(v) {
    // v: yyyy-mm-dd -> Date o null
    if (!v) return null;
    var m = v.match(/^(\d{4})-(\d{2})-(\d{2})$/);
    if (!m) return null;
    return new Date(Number(m[1]), Number(m[2]) - 1, Number(m[3]));
  }

  // ===== Data productos =====
  function cargar() {
    setLoading(true);
    google.script.run
      .withSuccessHandler(function (res) {
        try {
          var arr = JSON.parse(res) || [];
          var normalizados = arr.map(function (r, i) {
            return Object.assign({}, r, { key: (r && r.id != null ? r.id : i) });
          });
          setData(normalizados);
        } catch (e) {
          Modal.error({ title: 'Error', content: 'No se pudo leer la respuesta del servidor.' });
        } finally {
          setLoading(false);
        }
      })
      .withFailureHandler(function (err) {
        setLoading(false);
        Modal.error({ title: 'Error de servidor', content: String((err && err.message) || err) });
      })
      .listarProductos();
  }

  // ===== Data sucursales =====
  function cargarSucursales() {
    google.script.run
      .withSuccessHandler(function (res) {
        try {
          var r = typeof res === 'string' ? JSON.parse(res) : res;
          if (r && r.ok && r.sucursales) setSucursales(r.sucursales);
          else setSucursales([]);
        } catch (e) { setSucursales([]); }
      })
      .withFailureHandler(function () { setSucursales([]); })
      .listarSucursalesActivas();
  }

  // Inicial: productos + sucursales
  useEffect(function () {
    cargar();
    cargarSucursales();
  }, []);

  // ¿Existe en opciones?
  function isInSucursalOptions(value) {
    for (var i = 0; i < sucursales.length; i++) {
      if (sucursales[i].nombreSucursal === value) return true;
    }
    return false;
  }

  // ===== Modals =====
  function abrirNuevo() {
    setModalMode('create');
    cargarSucursales();
    form.resetFields();
    setModalOpen(true);
  }

  function abrirEditar(rec) {
    setModalMode('edit');
    cargarSucursales();
    var d = parseFechaFlexible(rec.fechaEntrada);
    var sucPreset = isInSucursalOptions(rec.nombreSucursal) ? rec.nombreSucursal : undefined;

    form.setFieldsValue({
      id: rec.id,
      nombreProducto: rec.nombreProducto || '',
      precio: Number(rec.precio || 0),
      stock: Number(rec.stock || 0),
      fechaEntrada: d ? formatInputDate(d) : '',
      descripcion: rec.descripcion || '',
      nombreSucursal: sucPreset
    });
    setModalOpen(true);
  }

  function abrirEliminar(rec) {
    setToDelete(rec);
    setDeleteOpen(true);
  }

  // ===== Guardar (crear/editar) =====
  function onSubmit(values) {
    var payload = {
      id: values.id,
      nombreProducto: values.nombreProducto,
      precio: Number(values.precio || 0),
      stock: Number(values.stock || 0),
      fechaEntrada: values.fechaEntrada || '',
      descripcion: values.descripcion || '',
      nombreSucursal: values.nombreSucursal || ''
    };

    setLoading(true);
    if (modalMode === 'create') {
      google.script.run
        .withSuccessHandler(function (res) {
          setLoading(false);
          try {
            var r = typeof res === 'string' ? JSON.parse(res) : res;
            if (r && r.ok) {
              message.success('Producto creado');
              setModalOpen(false);
              cargar();
            } else {
              Modal.error({ title: 'No se pudo crear', content: (r && r.message) || 'Error desconocido' });
            }
          } catch (e) {
            Modal.error({ title: 'Error', content: 'Respuesta inválida del servidor.' });
          }
        })
        .withFailureHandler(function (err) {
          setLoading(false);
          Modal.error({ title: 'Error de servidor', content: String((err && err.message) || err) });
        })
        .crearProducto(payload);
    } else {
      google.script.run
        .withSuccessHandler(function (res) {
          setLoading(false);
          try {
            var r = typeof res === 'string' ? JSON.parse(res) : res;
            if (r && r.ok) {
              message.success('Producto actualizado');
              setModalOpen(false);
              cargar();
            } else {
              Modal.error({ title: 'No se pudo actualizar', content: (r && r.message) || 'Error desconocido' });
            }
          } catch (e) {
            Modal.error({ title: 'Error', content: 'Respuesta inválida del servidor.' });
          }
        })
        .withFailureHandler(function (err) {
          setLoading(false);
          Modal.error({ title: 'Error de servidor', content: String((err && err.message) || err) });
        })
        .actualizarProducto(payload);
    }
  }

  // ===== Eliminar =====
  function confirmarEliminar() {
    if (!toDelete) { setDeleteOpen(false); return; }
    setLoading(true);
    google.script.run
      .withSuccessHandler(function (res) {
        setLoading(false);
        try {
          var r = typeof res === 'string' ? JSON.parse(res) : res;
          if (r && r.ok) {
            message.success('Producto eliminado');
            setDeleteOpen(false);
            setToDelete(null);
            cargar();
          } else {
            Modal.error({ title: 'No se pudo eliminar', content: (r && r.message) || 'Error desconocido' });
          }
        } catch (e) {
          Modal.error({ title: 'Error', content: 'Respuesta inválida del servidor.' });
        }
      })
      .withFailureHandler(function (err) {
        setLoading(false);
        Modal.error({ title: 'Error de servidor', content: String((err && err.message) || err) });
      })
      .eliminarProducto(toDelete.id);
  }

  // ====== FILTRADO ======
  function applyFilters(arr) {
    var qnorm = (q || '').toLowerCase().trim();
    var dFrom = parseInputDate(fDesde);
    var dTo = parseInputDate(fHasta);
    var pMin = fPrecioMin != null ? Number(fPrecioMin) : null;
    var pMax = fPrecioMax != null ? Number(fPrecioMax) : null;
    var sMin = fStockMin != null ? Number(fStockMin) : null;
    var sMax = fStockMax != null ? Number(fStockMax) : null;

    return (arr || []).filter(function (r) {
      // Buscar
      if (qnorm) {
        var t1 = (r.nombreProducto || '').toString().toLowerCase();
        var t2 = (r.descripcion || '').toString().toLowerCase();
        if (t1.indexOf(qnorm) === -1 && t2.indexOf(qnorm) === -1) return false;
      }
      // Sucursal
      if (fSucursal && r.nombreSucursal !== fSucursal) return false;

      // Fecha dentro de [desde, hasta]
      if (fDesde || fHasta) {
        var d = parseFechaFlexible(r.fechaEntrada);
        if (!d) return false;
        if (dFrom && d.getTime() < dFrom.getTime()) return false;
        if (dTo) {
          // incluir el día completo "hasta"
          var dToEnd = new Date(dTo.getFullYear(), dTo.getMonth(), dTo.getDate(), 23, 59, 59, 999);
          if (d.getTime() > dToEnd.getTime()) return false;
        }
      }

      // Precio
      var precio = Number(r.precio || 0);
      if (pMin != null && precio < pMin) return false;
      if (pMax != null && precio > pMax) return false;

      // Stock
      var stock = Number(r.stock || 0);
      if (sMin != null && stock < sMin) return false;
      if (sMax != null && stock > sMax) return false;

      return true;
    });
  }

  var filtered = applyFilters(data);

  // ====== KPIs ======
  function sumBy(arr, selector) {
    var s = 0;
    for (var i = 0; i < arr.length; i++) s += Number(selector(arr[i]) || 0);
    return s;
  }
  var totalProductos = filtered.length;
  var totalStock = sumBy(filtered, function (r) { return r.stock; });
  var valorInventario = sumBy(filtered, function (r) { return Number(r.precio || 0) * Number(r.stock || 0); });

  // ====== PAGINACIÓN Load More: recorte de datos ======
  var total = filtered.length;
  var canLoadMore = visibleCount < total;
  var paged = filtered.slice(0, visibleCount);

  function loadMore() {
    var next = visibleCount + batchSize;
    if (next > total) next = total;
    setVisibleCount(next);
  }
  function showAll() {
    setVisibleCount(total);
  }
  function onBatchChange(value) {
    // value es 10,20,50,100
    setBatchSize(Number(value));
    // visibleCount se reajusta por el useEffect de arriba
  }

  // ===== Columnas =====
  // CABECERAS MODIFICADAS: 'ID' -> 'No.' Y 'Precio' -> 'Precio Unitario'
  const columns = [
    { title: 'No.', dataIndex: 'id', key: 'id', width: 70,
      sorter: function(a,b){ return String(a.id).localeCompare(String(b.id)); } },
    { title: 'Nombre', dataIndex: 'nombreProducto', key: 'nombreProducto' },
    { title: 'Precio Unitario', dataIndex: 'precio', key: 'precio',
      render: function (v) { return formatHNL(v); },
      sorter: function (a, b) { return Number(a.precio || 0) - Number(b.precio || 0); },
      align: 'right', width: 120
    },
    { title: 'Stock', dataIndex: 'stock', key: 'stock', align: 'right', width: 90 },
    { title: 'Fecha de Entrada', dataIndex: 'fechaEntrada', key: 'fechaEntrada',
      render: function (v) {
        var d = parseFechaFlexible(v);
        return d ? formatYMD(d) : (v == null ? '' : String(v));
      },
      sorter: function(a,b){
        var da = parseFechaFlexible(a.fechaEntrada);
        var db = parseFechaFlexible(b.fechaEntrada);
        var ta = da ? da.getTime() : 0;
        var tb = db ? db.getTime() : 0;
        return ta - tb;
      },
      width: 120
    },
    { title: 'Descripción', dataIndex: 'descripcion', key: 'descripcion' },
    { title: 'Sucursal', dataIndex: 'nombreSucursal', key: 'nombreSucursal', width: 200 },
    { title: 'Acciones', key: 'acciones', fixed: 'right', width: 160,
      render: function(_, record){
        return (
          <Space>
            <Button size="small" onClick={function(){ abrirEditar(record); }}>Editar</Button>
            <Button size="small" danger onClick={function(){ abrirEliminar(record); }}>Eliminar</Button>
          </Space>
        );
      }
    }
  ];

  // Opciones para Select (no editable)
  var sucOptions = sucursales.map(function (s) {
    return { value: s.nombreSucursal, label: s.nombreSucursal };
  });

  // ===== Reset filtros =====
  function resetFiltros() {
    setQ('');
    setFSucursal(undefined);
    setFDesde('');
    setFHasta('');
    setFPrecioMin(null);
    setFPrecioMax(null);
    setFStockMin(null);
    setFStockMax(null);
  }

  return (
    <Card
      title="Productos"
      extra={
        <Space>
          <Button onClick={cargar} loading={loading} icon={<icons.ReloadOutlined />}>Refrescar</Button>
          <Button type="primary" onClick={abrirNuevo} icon={<icons.PlusOutlined />}>Nuevo</Button>
        </Space>
      }
    >
      {/* KPIs */}
      <Row gutter={[12, 12]}>
        <Col xs={24} md={8}>
          <Card size="small">
            <b>Total productos:</b> {totalProductos}
          </Card>
        </Col>
        <Col xs={24} md={8}>
          <Card size="small">
            <b>Stock total:</b> {totalStock}
          </Card>
        </Col>
        <Col xs={24} md={8}>
          <Card size="small">
            <b>Valor inventario:</b> {formatHNL(valorInventario)}
          </Card>
        </Col>
      </Row>

      <Divider style={{ margin: '12px 0' }} />

      {/* Filtros */}
      <Row gutter={[12, 12]} align="bottom">
        <Col xs={24} md={8}>
          <label style={{ display: 'block', marginBottom: 4 }}>Buscar (nombre o descripción)</label>
          <Input
            allowClear
            placeholder="Buscar..."
            value={q}
            onChange={function(e){ setQ(e.target.value); }}
            prefix={<icons.FilterOutlined />}
          />
        </Col>

        <Col xs={24} md={8}>
          <label style={{ display: 'block', marginBottom: 4 }}>Sucursal</label>
          <Select
            options={sucOptions}
            showSearch={false}
            allowClear
            placeholder="Todas"
            value={fSucursal}
            onChange={function(v){ setFSucursal(v); }}
            style={{ width: '100%' }}
          />
        </Col>

        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Desde</label>
          <Input type="date" value={fDesde} onChange={function(e){ setFDesde(e.target.value); }} />
        </Col>
        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Hasta</label>
          <Input type="date" value={fHasta} onChange={function(e){ setFHasta(e.target.value); }} />
        </Col>

        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Precio min</label>
          <InputNumber
            min={0} step={0.01} style={{ width: '100%' }}
            value={fPrecioMin}
            onChange={function(v){ setFPrecioMin(v); }}
          />
        </Col>
        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Precio max</label>
          <InputNumber
            min={0} step={0.01} style={{ width: '100%' }}
            value={fPrecioMax}
            onChange={function(v){ setFPrecioMax(v); }}
          />
        </Col>

        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Stock min</label>
          <InputNumber
            min={0} step={1} style={{ width: '100%' }}
            value={fStockMin}
            onChange={function(v){ setFStockMin(v); }}
          />
        </Col>
        <Col xs={12} md={4}>
          <label style={{ display: 'block', marginBottom: 4 }}>Stock max</label>
          <InputNumber
            min={0} step={1} style={{ width: '100%' }}
            value={fStockMax}
            onChange={function(v){ setFStockMax(v); }}
          />
        </Col>

        <Col xs={24} md={8}>
          <Space wrap>
            <Button onClick={resetFiltros}>Limpiar filtros</Button>
            <Button type="default" icon={<icons.DownloadOutlined />} onClick={function(){
              // Export CSV (usa 'filtered' completo, no 'paged')
              var headers = ['id','nombreProducto','precio','stock','fechaEntrada','descripcion','nombreSucursal'];
              var rows = filtered.map(function(r){
                var d = parseFechaFlexible(r.fechaEntrada);
                var fecha = d ? formatYMD(d) : '';
                function esc(x){
                  var s = (x == null ? '' : String(x));
                  if (s.indexOf('"') >= 0 || s.indexOf(',') >= 0 || s.indexOf('\n') >= 0) {
                    s = '"' + s.replace(/"/g, '""') + '"';
                  }
                  return s;
                }
                return [
                  esc(r.id),
                  esc(r.nombreProducto),
                  esc(Number(r.precio || 0).toFixed(2)),
                  esc(r.stock),
                  esc(fecha),
                  esc(r.descripcion),
                  esc(r.nombreSucursal)
                ].join(',');
              });
              var csv = headers.join(',') + '\n' + rows.join('\n');
              var blob = new Blob([csv], {type: 'text/csv;charset=utf-8;'});
              var url = URL.createObjectURL(blob);
              var a = document.createElement('a');
              a.href = url; a.download = 'productos_filtrados.csv';
              document.body.appendChild(a); a.click();
              document.body.removeChild(a); URL.revokeObjectURL(url);
            }}>
              Exportar CSV (filtrado)
            </Button>
          </Space>
        </Col>
      </Row>

      <Divider style={{ margin: '12px 0' }} />

      {/* TABLA CON PAGINACIÓN NATIVA (MANTENIDO) */}
      <Table
        dataSource={filtered}
        columns={columns}
        loading={loading}
        pagination={{ pageSize: 10 }}
        rowKey={function(r){ return (r && r.id != null) ? r.id : r.key; }}
        scroll={{ x: true }}
      />

      {/* CONTROLES "LOAD MORE" (LEGADO) OCULTOS PARA EVITAR DOBLE PAGINACIÓN */}
      <div style={{ display:'none', alignItems:'center', gap:12, flexWrap:'wrap', marginTop:12 }}>
        <span style={{ opacity: .8 }}>
          Mostrando <b>{paged.length}</b> de <b>{total}</b>
        </span>

        <Select
          value={String(batchSize)}
          onChange={onBatchChange}
          style={{ width: 140 }}
          options={[
            { value: '10', label: 'Lote: 10' },
            { value: '20', label: 'Lote: 20' },
            { value: '50', label: 'Lote: 50' },
            { value: '100', label: 'Lote: 100' }
          ]}
        />

        <Space wrap>
          <Button onClick={loadMore} disabled={!canLoadMore}>Cargar más</Button>
          <Button onClick={showAll} disabled={!canLoadMore}>Mostrar todo</Button>
          <Button onClick={function(){ window.scrollTo({ top: 0, behavior: 'smooth' }); }}>
            Ir arriba
          </Button>
        </Space>
      </div>

      {/* Modal Crear/Editar */}
    <Modal
    centered
    title={
        <Space>
        {modalMode === 'create' ? <icons.PlusOutlined /> : <icons.EditOutlined />}
        <span>{modalMode === 'create' ? 'Nuevo Producto' : 'Editar Producto'}</span>
        </Space>
    }
    open={modalOpen} visible={modalOpen}
    maskClosable={false}
    keyboard={false}
    destroyOnClose
    confirmLoading={loading}
    okText={modalMode === 'create' ? 'Crear' : 'Guardar'}
    cancelText="Cancelar"
    onCancel={function(){ setModalOpen(false); }}
    onOk={function(){ form.submit(); }}
    afterOpenChange={function(open){
        if(open){
        setTimeout(function(){
            var el = document.getElementById('nombreProductoInput');
            if(el) el.focus();
        }, 50);
        }
    }}
    >
    <Form form={form} layout="vertical" onFinish={onSubmit}>
        <Form.Item name="id" style={{ display: 'none' }}>
        <Input />
        </Form.Item>

        <Form.Item label="Nombre" name="nombreProducto"
        rules={[{ required: true, message: 'Ingrese el nombre del producto' }]}>
        <Input id="nombreProductoInput" placeholder="Ej. Shampoo" autoComplete="off" />
        </Form.Item>

        {/* CAMBIO: ETIQUETA Y PLACEHOLDER A "PRECIO UNITARIO" */}
        <Form.Item
          label="Precio Unitario (L.)"
          name="precio"
          rules={[
            { required: true, message: 'Ingrese el precio unitario' },
            {
              // VALIDACIÓN: SOLO NÚMEROS Y NO NEGATIVO
              validator: function(_, value) {
                if (value === undefined || value === null || value === '') return Promise.resolve();
                if (typeof value !== 'number' || isNaN(value)) return Promise.reject('SOLO NÚMEROS');
                if (value < 0) return Promise.reject('EL PRECIO NO PUEDE SER NEGATIVO');
                return Promise.resolve();
              }
            }
          ]}
        >
          <InputNumber
            min={0}
            step={0.01}
            precision={2}
            style={{ width: '100%' }}
            placeholder="Ej. 100.00 – Precio Unitario"
          />
        </Form.Item>

        <Form.Item
          label="Stock"
          name="stock"
          rules={[
            { required: true, message: 'Ingrese el stock' },
            {
              // VALIDACIÓN: SOLO NÚMEROS, ENTERO Y NO NEGATIVO
              validator: function(_, value) {
                if (value === undefined || value === null || value === '') return Promise.resolve();
                if (typeof value !== 'number' || isNaN(value)) return Promise.reject('SOLO NÚMEROS');
                if (value < 0) return Promise.reject('EL STOCK NO PUEDE SER NEGATIVO');
                if (!Number.isInteger(value)) return Promise.reject('EL STOCK DEBE SER UN NÚMERO ENTERO');
                return Promise.resolve();
              }
            }
          ]}
        >
          <InputNumber
            min={0}
            step={1}
            precision={0}  // SOLO ENTEROS
            style={{ width: '100%' }}
            placeholder="Ej. 10"
          />
        </Form.Item>

        <Form.Item
          label="Fecha de Entrada"
          name="fechaEntrada"
          rules={[
            {
              // VALIDACIÓN: FECHA NO MAYOR A HOY
              validator: function(_, value) {
                if (!value) return Promise.resolve();
                var d = parseInputDate(value);
                if (!d) return Promise.reject('FECHA INVÁLIDA');
                var hoy = new Date();
                hoy.setHours(23,59,59,999);
                if (d.getTime() > hoy.getTime()) return Promise.reject('LA FECHA NO PUEDE SER MAYOR A HOY');
                return Promise.resolve();
              }
            }
          ]}
        >
          <Input type="date" />
        </Form.Item>

        <Form.Item label="Descripción" name="descripcion">
        <Input.TextArea rows={3} placeholder="Detalles del producto" />
        </Form.Item>

        {/* Select de sucursales - NO editable */}
        <Form.Item label="Sucursal" name="nombreSucursal"
        rules={[{ required: true, message: 'Seleccione una sucursal' }]}>
        <Select
            options={sucursales.map(function (s) { return { value: s.nombreSucursal, label: s.nombreSucursal }; })}
            showSearch={false}
            placeholder="Seleccione sucursal"
        />
        </Form.Item>
    </Form>
    </Modal>


      {/* Modal Eliminar */}
    <Modal
    centered
    title="Eliminar Producto"
    open={deleteOpen} visible={deleteOpen}
    maskClosable={false}
    keyboard={false}
    destroyOnClose
    confirmLoading={loading}
    okText="Eliminar"
    cancelText="Cancelar"
    okButtonProps={{ danger: true }}
    onCancel={function(){ setDeleteOpen(false); setToDelete(null); }}
    onOk={confirmarEliminar}
    >
    <p>
        ¿Seguro que deseas eliminar el producto{' '}
        <b>{toDelete ? (toDelete.nombreProducto || ('ID ' + toDelete.id)) : ''}</b>?
    </p>
    <p>Esta acción no se puede deshacer.</p>
    </Modal>

    </Card>
  );
}
//</script>
